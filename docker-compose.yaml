services:
  nuxt-app:
    build:
      context: .
      dockerfile: Dockerfile
    image: app.niebieskie.aparaty:1.0
    ports:
      - "3333:3333"
    deploy:
      resources:
        limits:
          cpus: "0.5"
          memory: 512M  
    environment:
      - NUXT_SESSION_PASSWORD=${NUXT_SESSION_PASSWORD}
      - NITRO_PORT=3333
      - AWS_REGION=${AWS_REGION}
      - AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
      - AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
    restart: unless-stopped
    command: ["node", ".output/server/index.mjs"]



